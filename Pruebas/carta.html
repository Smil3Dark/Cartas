<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mensaje Especial</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="icono.jpg">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Caveat', cursive;
            background: linear-gradient(135deg, #FFE5F1 0%, #E8F4FD 50%, #F0E6FF 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            overflow-y: auto;
            position: relative;
            padding: 20px 0;
        }

        .container {
            text-align: center;
            max-width: 90%;
            width: 100%;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .intro-text {
            font-size: clamp(1.4rem, 4.5vw, 2.8rem);
            color: #8B5A8C;
            font-weight: 500;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s ease;
            line-height: 1.4;
            word-wrap: break-word;
            max-width: 100%;
        }

        .intro-text.show {
            opacity: 1;
            transform: translateY(0);
        }

        .typewriter-text {
            font-size: clamp(1.3rem, 4.2vw, 2.6rem);
            color: #8B5A8C;
            font-weight: 500;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s ease;
            line-height: 1.4;
            word-wrap: break-word;
            max-width: 100%;
            display: none;
        }

        .typewriter-text.show {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }

        .cursor {
            display: inline-block;
            background-color: #FF69B4;
            width: 3px;
            animation: blink 1s infinite;
            margin-left: 2px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .heart-container {
            display: none;
            margin: 2rem 0;
            animation: fadeInScale 1s ease forwards;
        }

        .heart-container.show {
            display: block;
        }

        .heart {
            font-size: 4rem;
            color: #FF69B4;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
            user-select: none;
        }

        .heart:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
        }

        .heart.clicked {
            animation: heartBounce 0.6s ease;
        }

        @keyframes fadeInScale {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes heartBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .heart.explode {
            animation: explode 0.8s ease forwards;
        }

        @keyframes explode {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(2);
                opacity: 0.8;
            }
            100% {
                transform: scale(4);
                opacity: 0;
            }
        }

        .final-message {
            display: none;
            opacity: 0;
            transform: translateY(30px);
        }

        .final-message.show {
            display: block;
            animation: finalFadeIn 2s ease forwards;
        }

        @keyframes finalFadeIn {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .final-text {
            font-size: clamp(1.5rem, 5vw, 3.5rem);
            font-weight: 600;
            background: linear-gradient(45deg, #FF69B4, #DDA0DD, #87CEEB, #FFB6C1);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
            text-shadow: 0 2px 10px rgba(255, 105, 180, 0.3);
            line-height: 1.2;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-heart {
            position: absolute;
            font-size: 1.5rem;
            color: rgba(255, 105, 180, 0.6);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10%, 90% {
                opacity: 1;
            }
            50% {
                transform: translateY(-10vh) rotate(180deg);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .heart {
                font-size: 3rem;
            }
            
            .typewriter-text {
                margin-bottom: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .heart {
                font-size: 2.5rem;
            }
            
            .typewriter-text {
                margin-bottom: 1rem;
            }
        }

        /* Hide elements during final animation */
        .fade-out {
            animation: fadeOut 1s ease forwards;
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="floating-hearts" id="floatingHearts"></div>
    
    <div class="container">
        <div class="intro-text" id="introText">
            <span id="introTextSpan"></span><span class="cursor" id="introCursor"></span>
        </div>
        
        <div class="typewriter-text" id="typewriterText">
            <span id="text"></span><span class="cursor" id="cursor"></span>
        </div>
        
        <div class="heart-container" id="heartContainer">
            <div class="heart" id="heart"></div>
        </div>
        
        <div class="final-message" id="finalMessage">
            <div class="final-text">Feliz d铆a a mi futura novia y raz贸n de ser </div>
        </div>
    </div>

    <audio id="backgroundMusic" preload="auto" loop>
        <source src="yellow.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <script>
        // Textos a escribir (puedes cambiarlos aqu铆)
        const introText = "Hola, solo quer铆a decirte que...";
        const mainText = "Se que no llevamos mucho tiempo de conocernos, sin embargo, este tiempo ha sido suficiente para darme cuenta de que eres una persona por la que realmente me animaria a hacer este tipo de cosas, eres muy especial , tienes un gran coraz贸n, coraz贸n que me gustaria cuidar y estar siempre con el, a tu lado, se q es muy pronto pero, no puedo ocultar lo tan bonito que es estar contigo, con esa sonrisa que ilumina mi d铆a, con esos ojos que me hacen sentir en casa, con esa risa que me hace sentir tan feliz y en paz, adem谩s de ese cari帽o que me hace sentir amado. Quizas no ser茅 el mejor haciendo cartas pero, espero que esta carta te guste tanto como t煤 a m铆. ILY .";
        
        // Variables del estado
        let clickCount = 0;
        let isTyping = false;
        
        // Elementos del DOM
        const introElement = document.getElementById('introText');
        const introTextSpan = document.getElementById('introTextSpan');
        const introCursor = document.getElementById('introCursor');
        const typewriterElement = document.getElementById('typewriterText');
        const textElement = document.getElementById('text');
        const cursorElement = document.getElementById('cursor');
        const heartContainer = document.getElementById('heartContainer');
        const heart = document.getElementById('heart');
        const finalMessage = document.getElementById('finalMessage');
        const backgroundMusic = document.getElementById('backgroundMusic');

        // Funci贸n para crear corazones flotantes
        function createFloatingHearts() {
            const heartsContainer = document.getElementById('floatingHearts');
            const hearts = ['', '', '', '', ''];
            
            setInterval(() => {
                if (document.getElementById('finalMessage').classList.contains('show')) {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.animationDelay = Math.random() * 2 + 's';
                    heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
                    
                    heartsContainer.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 7000);
                }
            }, 800);
        }

        // Funci贸n de m谩quina de escribir
        function typeWriter(text, element, speed = 150) {
            return new Promise((resolve) => {
                isTyping = true;
                let i = 0;
                
                function type() {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                        setTimeout(type, speed);
                    } else {
                        isTyping = false;
                        resolve();
                    }
                }
                
                type();
            });
        }

        // Funci贸n para mostrar el coraz贸n
        function showHeart() {
            heartContainer.classList.add('show');
            heart.addEventListener('click', handleHeartClick);
        }

        // Manejar clics en el coraz贸n
        function handleHeartClick() {
            if (clickCount < 4) {
                clickCount++;
                heart.classList.add('clicked');
                
                // Incrementar tama帽o
                const newSize = 4 + (clickCount * 2);
                heart.style.fontSize = `${newSize}rem`;
                
                // Remover clase de animaci贸n despu茅s de completarse
                setTimeout(() => {
                    heart.classList.remove('clicked');
                }, 600);
                
                // Si es el cuarto clic, explotar
                if (clickCount === 4) {
                    setTimeout(() => {
                        explodeHeart();
                    }, 300);
                }
            }
        }

        // Funci贸n para explotar el coraz贸n
        function explodeHeart() {
            // Animaci贸n de explosi贸n
            heart.classList.add('explode');
            
            // Confeti
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#FF69B4', '#DDA0DD', '#87CEEB', '#FFB6C1', '#FFCCCB']
            });
            
            setTimeout(() => {
                confetti({
                    particleCount: 50,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#FF69B4', '#DDA0DD', '#87CEEB', '#FFB6C1', '#FFCCCB']
                });
            }, 200);
            
            setTimeout(() => {
                confetti({
                    particleCount: 50,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#FF69B4', '#DDA0DD', '#87CEEB', '#FFB6C1', '#FFCCCB']
                });
            }, 400);
            
            // Ocultar elementos anteriores y mostrar mensaje final
            setTimeout(() => {
                typewriterElement.classList.add('fade-out');
                heartContainer.classList.add('fade-out');
                
                setTimeout(() => {
                    typewriterElement.classList.add('hidden');
                    heartContainer.classList.add('hidden');
                    finalMessage.classList.add('show');
                    
                    // Reproducir m煤sica
                    backgroundMusic.play().catch(e => {
                        console.log('No se pudo reproducir la m煤sica autom谩ticamente:', e);
                        // Crear bot贸n para reproducir m煤sica manualmente
                        const playButton = document.createElement('button');
                        playButton.textContent = ' Reproducir m煤sica';
                        playButton.style.cssText = `
                            position: fixed;
                            bottom: 20px;
                            right: 20px;
                            background: linear-gradient(45deg, #FF69B4, #DDA0DD);
                            color: white;
                            border: none;
                            padding: 10px 20px;
                            border-radius: 25px;
                            font-family: 'Caveat', cursive;
                            font-weight: 600;
                            cursor: pointer;
                            z-index: 1000;
                            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
                            transition: all 0.3s ease;
                        `;
                        
                        playButton.addEventListener('click', () => {
                            backgroundMusic.play();
                            playButton.remove();
                        });
                        
                        playButton.addEventListener('mouseover', () => {
                            playButton.style.transform = 'scale(1.05)';
                        });
                        
                        playButton.addEventListener('mouseout', () => {
                            playButton.style.transform = 'scale(1)';
                        });
                        
                        document.body.appendChild(playButton);
                    });
                    
                    // Iniciar corazones flotantes
                    createFloatingHearts();
                }, 1000);
            }, 800);
        }

        // Inicializar la secuencia
        async function startSequence() {
            // Mostrar el texto de introducci贸n
            introElement.classList.add('show');
            
            // Esperar un poco antes de empezar a escribir la introducci贸n
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // Escribir el texto de introducci贸n
            await typeWriter(introText, introTextSpan, 120);
            
            // Esperar 3 segundos despu茅s de terminar la introducci贸n
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            // Ocultar cursor de introducci贸n y hacer fade out
            introCursor.style.display = 'none';
            introElement.classList.add('fade-out');
            
            // Esperar a que termine el fade out
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Ocultar completamente la introducci贸n y mostrar texto principal
            introElement.style.display = 'none';
            typewriterElement.classList.add('show');
            
            // Esperar un poco antes de empezar a escribir el texto principal
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // Escribir el texto principal
            await typeWriter(mainText, textElement, 130);
            
            // Ocultar cursor despu茅s de terminar
            setTimeout(() => {
                cursorElement.style.display = 'none';
            }, 1000);
            
            // Mostrar el coraz贸n despu茅s de terminar de escribir
            setTimeout(showHeart, 1200);
        }

        // Iniciar cuando la p谩gina se carga
        window.addEventListener('load', startSequence);

        // Prevenir zoom en dispositivos m贸viles
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        });
    </script>
</body>
</html>